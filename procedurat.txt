Procedura per shtimin e LEXUESVE :
emri : register_new_user
BEGIN
  DECLARE personi_id INT;

  -- Insert a row into UserTable
  INSERT INTO personi (emri, mbiemri, email, datelindja, qyteti, paga, nr_tel, biblioteka_ID ) 
  	VALUES (emri, mbiemri, email, datelindja, qyteti, NULL, nr_tel, 1000 );

  -- Get the inserted user_id
  SET personi_ID = LAST_INSERT_ID();

  -- Insert a row into UserData with the inserted user_id
  INSERT INTO useri (username, password, personi_ID, roli_id) VALUES (username, password, personi_ID, 4);
END


Procedura per shtimin e PUNETOREVE:
emri: register_new_employee
BEGIN
  DECLARE personi_id INT;

  -- Insert a row into UserTable
  INSERT INTO personi (emri, mbiemri, email, datelindja, qyteti, paga, nr_tel, biblioteka_ID ) 
  	VALUES (emri, mbiemri, email, datelindja, qyteti, paga, nr_tel, 1000 );

  -- Get the inserted user_id
  SET personi_ID = LAST_INSERT_ID();

  -- Insert a row into UserData with the inserted user_id
  INSERT INTO useri (username, password, personi_ID, roli_id) VALUES (username, password, personi_ID, 3);
END

Procedura per shtimin e MENAXHERAVE:
emri : register_new_manager
BEGIN
  DECLARE personi_id INT;

  -- Insert a row into UserTable
  INSERT INTO personi (emri, mbiemri, email, datelindja, qyteti, paga, nr_tel, biblioteka_ID ) 
  	VALUES (emri, mbiemri, email, datelindja, qyteti, paga, nr_tel, 1000 );

  -- Get the inserted user_id
  SET personi_ID = LAST_INSERT_ID();

  -- Insert a row into UserData with the inserted user_id
  INSERT INTO useri (username, password, personi_ID, roli_id) VALUES (username, password, personi_ID, 2);
END


Procedura per regjistrimin e pagesave:
emri:save_payment
BEGIN
    DECLARE email_count INT;
    DECLARE personiId INT;

    -- Check if email exists in the personi table
    SELECT COUNT(*) INTO email_count
    FROM personi
    WHERE email = p_email;

    IF email_count = 0 THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Email does not exist in the personi table.';
    ELSE
        -- Get the personiId for the provided email
        SELECT personi_id INTO personiId
        FROM personi
        WHERE email = p_email
        LIMIT 1;

        -- Insert the payment information into the pagesa table
        INSERT INTO pagesa (data_pageses, email, emriKarteles, nrKarteles, personi_id, qyteti, shuma)
        VALUES (CURDATE(), p_email, NULL, NULL, personiId, p_qyteti, p_shuma);
    END IF;
END